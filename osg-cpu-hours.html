<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>OSG Hours</title>
<style>
p, table {font-family: monospace}
td {text-align: center}
</style>
<script src="jquery-3.4.1.js"></script>
</head>
<body>


<h2>OSG CPU Hours</h2>
<h3>All Science except LHC Experiments</h3>
<table border=1>

<tr>
  <th></th>
  <th>Last 24 Hours</th>
  <th>Last 30 Days</th>
  <th>Last 12 Months</th>
</tr>

<tr id="all_non_lhc_row">
  <th>All Science, excluding LHC</th>
</tr>

<tr id="osg_connect_row">
  <th>OSG Connect Communities</th>
</tr>

<tr id="multi_inst_row">
  <th>Multi-Institutional Projects</th>
</tr>

<tr id="campus_orgs_row">
  <th>Campus Organizations</th>
</tr>

<tr id="gpu_usage_row">
  <th>GPU Utilization</th>
</tr>

</table>


<br/><br/>

<hr/>

<h2>OSG CPU Hours for CC*</h2>
<table border=1>
<tr>
<th></th>
<th>Last 30 Days</th>
<th>Last 90 Days</th>
<th>Last 365 Days</th>
</tr>
<tr id="osg_hours_row">
<th>CPU Hours</th>
</tr>
<tr id="fqdn_count_row">
<th>CEs Reporting</th>
</tr>
</table>

<br/><br/>

<h2>OSG GPU Hours for CC*</h2>
<table border=1>
<tr>
<th></th>
<th>Last 30 Days</th>
<th>Last 90 Days</th>
<th>Last 365 Days</th>
</tr>
<tr id="osg_hours_gpus_row">
<th>GPU Hours</th>
</tr>
<tr id="fqdn_count_gpus_row">
<th>CEs Reporting</th>
</tr>
</table>

<script>
(function() {
  $.getJSON(
    document.location.pathname.split('/').slice(-1)[0].split('.')[0] + '.json')
    .done(function(data) {
      $.each(data.hours_all, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#osg_hours_row");
      });
      $.each(data.fqdn_counts_all, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#fqdn_count_row");
      });

      // GPU jobs
      $.each(data.hours_gpu, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#osg_hours_gpus_row");
      });
      $.each(data.fqdn_counts_gpu, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#fqdn_count_gpus_row");
      });

      // GRACC dashboard table
      $.each(data.osg_connect, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#osg_connect_row");
      });
      $.each(data.multi_inst, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#multi_inst_row");
      });
      $.each(data.campus_orgs, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#campus_orgs_row");
      });
      $.each(data.gpu_usage, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#gpu_usage_row");
      });
      $.each(data.all_non_lhc, function(i, x) {
        $("<td>" + x + "</td>").appendTo("#all_non_lhc_row");
      });
    });
})();
</script>
</body>
</html>
